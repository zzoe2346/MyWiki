- ==이건 명시적으로 잠금 안쓴다==
- 대신 데이터를 조회한 시점 값과 수정하려는 시점의 값 같은지 비교하는 방식으로 동시성 문제 처리함.
- 보통 비선점 잠금 구현할 때는 정수 타입의 **버전 칼럼**을 씀.
- 버전 칼럼 이용해서 잠금 구현하는 방식은 아래와 같다.
1 SELECT 쿼리실행시 version 컬럼 함께 조회
```
SELECT ..., version
FROM TABLE
WHERE ID = id
```

2 로직 수행

3 UPDATE 쿼리 실행시 version 칼럼을 1 증가. 이때 version 칼럼 감ㅅ이 1에서 조회한 값과 같은지 비교하는 조건을 WHERE절에 추가.

```
UPDATE TABLE SET ..., version = version + 1
WHERE ID = id AND version = [1에서 조회한 version 값]
```

4 UPDATA 결과로 변경된 행 개수가 0이면, 이미 다른 트랜잭션이 version값 증가시킨것이므로 데이터 변경에 실패한것. 이 경우 트랜잭션을 롤백함.(만약 0보다 크면 커밋하면되지 당연히)

비선점의 경우는 락 대기 과정이 없어서 실패하는 경우 바로 유저에게 응답해줄 수 있는 장점이 있다.