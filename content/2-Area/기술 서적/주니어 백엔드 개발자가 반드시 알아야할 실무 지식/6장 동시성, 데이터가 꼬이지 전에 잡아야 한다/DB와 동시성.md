---
tags:
  - concurency
  - db
created: 2025-07-27
---
대부분의 DB는 명시적인 잠금 기법 제공. 이런 방식을 **선점 잠금**, **비관적 잠금**이라 부름. 선점 잠금을 사용하면 동일한 레코드에 대해 한 번에 하나의 트랜잭션만 접근 하도록 제어 가능.

반면 값을 비교해서 수정하는 방식은 **비선점 잠금**, **낙관적 잠금**이라 하며, 쿼리 실행 자체는 안막으면서도 데이터가 잘못 변경됨을 방지 가능.
[[선점(비관적) 잠금]], [[비선점(낙관형) 잠금]]
## 비관적, 낙관적이라는 용어를 쓰는 이유
왜 비관적이고 낙관적일까?

여기서 "비관적"은 실패할 가능성이 높아서 비관적이다. 다수가 데이터 변경을 시도하면 데이터를 정상적으로 변경할 가능성이 떨어질테니 이를 비관적이라고 표현한 것.

"낙관적"은 반대로 다수가 데이터 변경해도 성공할 가능성이 높아서 낙관적이란 것.

실패 가능성이 높은 비관적인 상황에서는 동시성 문제 해결위해 한 번에 한 개의클라만 접근할 수 있는 배타적 잠금을 사용하며, 이게 바로 비관적 잠금.

반대로, 성공 가능성 높은 낙관적 상황에선 동시성 문제를 해결하기 위해 배타적 잠금까지는 안쓴다. 대신 값을 비교하는 방식으로 동시성 문제에 대응. **실제로 잠금을 쓰지 않지만 비관적 잠금에 대응하는 용어로 낙관적 잠금이란 용어를 사용.**