---
tags:
  - ì·¨ì´ì½”ì „
  - ë¸Œë£¨íŠ¸í¬ìŠ¤
  - C
created: 2025-09-13
reviewed:
URL: https://school.programmers.co.kr/learn/courses/30/lessons/67257
ë°˜ë³µìˆ˜: "0"
ë³µìŠµ:
ì¤‘ìš”ì„±: true
ë ˆì´íŒ…: Lv. 2
ë©”ëª¨: ì¢‹ì€ë¬¸ì œ ìˆ™ë‹¬í•˜ì í›„ìœ„ ì¤‘ìœ„ ë³€í™˜ ë°©ë²•!
---
```
import java.util.*;

class Solution {
    private static ArrayList<ArrayList<Character>> operatorPriorities = new ArrayList<>();
    
    public long solution(String expression) {
        operatorPriorities.add(new ArrayList<>(Arrays.asList('+', '-', '*')));
        operatorPriorities.add(new ArrayList<>(Arrays.asList('+', '*', '-')));
        operatorPriorities.add(new ArrayList<>(Arrays.asList('-', '+', '*')));
        operatorPriorities.add(new ArrayList<>(Arrays.asList('-', '*', '+')));
        operatorPriorities.add(new ArrayList<>(Arrays.asList('*', '-', '+')));
        operatorPriorities.add(new ArrayList<>(Arrays.asList('*', '+', '-')));
        
        //ì—°ì‚¬ì ì–»ê¸° ì´ê²ƒë„ í•„ìš”ê°€ ì—†ë„¤
        //List<Character> operators = getOperators(expression);
        
        //ìš°ì„ ìˆœìœ„ë“¤ë¡œ ê³„ì‚°
        
        
        return calculate(expression);
    }
    
    private static long calculate(String s){
        long max = -1L;
        for(ArrayList<Character> priority : operatorPriorities){
            //í† í° ì¶”ì¶œ
            List<String> tokens = new ArrayList<>();
            StringBuilder sb = new StringBuilder();
            for(char c : s.toCharArray()){
                if(Character.isDigit(c)){
                    sb.append(c);
                }else{
                    tokens.add(sb.toString());
                    tokens.add(String.valueOf(c));
                    sb = new StringBuilder();
                }
            }
            if(sb.length() > 0) tokens.add(sb.toString());

            
            //í›„ìœ„ ì—°ì‚°ìœ¼ë¡œ ë³€ê²½
            Stack<Character> stack = new Stack<>();
            List<String> list = new ArrayList<>();
            
            for (String token : tokens) {
                if (token.equals("*") || token.equals("+") || token.equals("-")) {
                    int currentPriority = priority.indexOf(token.charAt(0));
                    while (!stack.isEmpty() && priority.indexOf(stack.peek()) >= currentPriority) {
                        list.add(String.valueOf(stack.pop()));
                    }
                    stack.push(token.charAt(0));
                } else {
                    list.add(token);
                }
            }

            // ğŸ”¥ ìŠ¤íƒì— ë‚¨ì•„ ìˆëŠ” ì—°ì‚°ì ëª¨ë‘ pop
            while (!stack.isEmpty()) {
                list.add(String.valueOf(stack.pop()));
            }
            
            // System.out.println(list);
            //stack ë¹„ì—ˆìœ¼ë‹ˆ ê·¸ëŒ€ë¡œì“°ë©´ëœë‹¤.
            Stack<String> stack2 = new Stack<>();
            for(String token : list){
                if (token.equals("*") || token.equals("+") || token.equals("-")) {
                    long b = Long.parseLong(stack2.pop());
                    long a = Long.parseLong(stack2.pop());
                    if(token.equals("*")) stack2.push(String.valueOf(a*b));
                    if(token.equals("+")) stack2.push(String.valueOf(a+b));
                    if(token.equals("-")) stack2.push(String.valueOf(a-b));
                }else{
                    stack2.push(token);
                }
                
            }
            max = Math.max(max, Math.abs(Long.parseLong(stack2.pop())));
        }
        return max;
    }
    
    private static List<Character> getOperators(String s){
        Set<Character> operators = new HashSet<>();
        for(char c : s.toCharArray()){
            if(c == '+' || c == '-' || c == '*') operators.add(c);
        }
        return new ArrayList<>(operators);
    }
}
```