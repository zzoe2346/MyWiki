---
created: 2025-07-09
---
- 대기 시간
	- 풀에 사용할 수 있는 커넥션이 없을 때 커넥션을 얻기 위해 기다릴 수 있는 최대 시간
	- 지정된 대기 시간 안에 커넥션 구하지 못하면 DB 연결 실패 에러 발생
- 대기 시간 짧게 설정하면 커넥션이 없을때 빠르게 '일시적 오류' 같은 에러 응답을 사용자에게 보여줄 수 있다
	- 부정적으로 보일 수 도 있지만,
	- 대기 시간때문에 긴 시간 무응답 상태로 유지되는것 보다 빠르게 에러 반환이 더 낫다.
- 예를 들어 커넥션 풀 크기 10, 대기 시간 30초
	- 동시에 30개 요청 발생, 순간적으로 DB 서버에 부하 걸려 쿼리 실행 시간이 10초로 증가
		- 이 시점 각 요청은 다음과 같은 상태가 됨
		- 요청 10개는 풀에서 커넥션 확보해 쿼리 실행 시작
		- 나머지 요청 20개는 대기 상태 진입
	- 이후, 대기하는 사람중 절반이 기다리지 못하고 5초만에 요청 취소하고 다시 요청했다고 가정!
		- 요청 10개 -> 쿼리 5초간 실행중
		- 요청 20개 -> 5초간 대기중
		- 요청 10개 -> 대기 시작
	- **클라이언트가 요청을 취소해도 서버는 일정 시간동안 하던 작업 즉시 중단하지 않기 때문에 이 시점의 대기 중인 요청 수는 총 30개가 된다**
	- ==서버가 동시 처리해야할 요청 수가 30개에서 40개로 증가함!==
- 이처럼, 몇 초 만에 요청 취소하고 재요청이 반복되면 동시에 처리해야할 요청 수는 계속 증가하게된다->서버 부하 증가
- 대기 시간 1초로 위에서 바꾸면 
	- 풀에서 커넥션 얻은 10개는 쿼리 2초간 실행하고
	- 나머지 20개는 오류 응답을 받음
	- 즉, 서버가 처리중인 동시 요청수는 10개가된 2초시점에서!
- 대기 시간 짧게 하면 서버 부하를 일정 수준으로 유지할 수 있으며 서버를 안정적으로 운영하는데 도움이됨