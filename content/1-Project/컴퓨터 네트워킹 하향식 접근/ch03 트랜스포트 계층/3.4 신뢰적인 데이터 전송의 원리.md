---
tags: 
created: 2025-08-12
---
이 절에서는 일반적인 상황에서의 신뢰적인 데이터 전송 문제 다룬다. 이는 신뢰적인 데이터 전송을 구현하는 문제가 트랜스포트 계층뿐만 아니라 링크 계층, 앱 계층에서도 발생할 수 있는 문제이기 때문이다. 이 문제는 정말 중요하다. 네트워킹에서 근본적으로 중요한 문제중 최상위가 이 문제가 선택될것이다. 다음절에서야 TCP를 설명하며, 특히 TCP가 지금 설명하려는 많은 원리를 이용한다.

다음 그림은 신뢰적인 데이터 전송 연구의 프레임워크. 
![[SCR-20250812-hsbh.jpeg]]

상위 계층 객체에게 제공되는 서비스 추상화는 데이터가 전송될 수 있는 신뢰적인 채널의 추상화다. 신뢰적인 채널에서는 전송된 데이터가 손상(0이 1이되거나 1이 0이 되거나)되거나 손실되지 않는다. 그리고 전송된 순서 그대로 전달된다.

이런 서비스 추상화를 구현하는 것이 신뢰적인 데이터 전송 프로토콜의 의무다. 이 작업은 신뢰적인 전송 프로토콜의 '아래에 있는' 계층이 신뢰적이지 않을 수 있어 어려워 진다. 그 예로, TCP는 비신뢰적인 종단 간의 네트워크 계층(IP)의 바로 상위에 구현된 신뢰적인 데이터 전송 프로토콜이다. 

rdt는 신뢰적인 데이터 전송(reliable data transfer). 21페이지에서 이 절에서 가정하는 요소를 설명해준다. 이 절에서는 단방향 데이터 전송인 경우인 송신측으로부터 수신측까지의 데이터 전송만을 고려한다. udt 비신뢰적인 데이터 전송(unreliable data transfer).

## 3.4.1 신뢰적인 데이터 전송 프로토콜의 구축
완전히 신뢰적인 데이터 전송 프로토콜에 도달하기 위해 조금씩 더 복잡해진는 일련의 프로토콜들을 알아보자.
### 완벽하게 신뢰적인 채널상에서의 신뢰적인 데이터 전송: rdt 1.0
먼저, 하위 채널이 완전히 신뢰적인 가장 간단한 경우를 고려한다. 프로토콜 자체는 단순하며 rdt 1.0 이라 부르겠다. rdt 1.0 송신자와 수신자에 대한 유한상태 머신(finite state machine, FSM)정리는 그림 3.9에 있다. (a)에서 FSM은 송신자의 동작을 정의, (b)의 FSM은 수신자의 동작을 정의한다. 송신자에 대해 그리고 수신자에 대해 분리된 FSM이 있다는 것을 유의. 그림에서는 각각 하나의 상태만 가지고있다. FSM 설명의 화살표는 한 상태로 부터 다른 상태로의 전이를 의미. 전이를 일으키는 이벤트는 변화를 표기하는 가로선 위에 나타낸다. 그리고 이벤트가 발생했을 때 취해지는 액션은 가로선 아래에 나타난다. 이벤트 발생 시 어떠한 행동도 취해지지 않거나 어떠한 이벤트 없이 행동이 취해질 때, 동작이나 이벤트가 없음을 명시하기 위해 각각 가로선 아래나 위에 기호 `A`를 사용한다. FSM의 초기 상태는 점선 화살표로 표신됨. 그림 3.9에서는 FSM이 각각 한 상태만 나타내지만, 앞으로는 여러 상태를 갖고있는 FSM을 볼 것이며, 따라서 FSM 의 초기 상태를 확인하는 것은 중요하다.

rdt의 송신 측은 rdt_send(data) 이벤트의 의해 상위 계층으로 부터 데이터를 받아들이고 데이터를 포함한 패킷을 생성한다.(make_pkt(data)의해). 그리고 난 후 패킷을 채널로 송신한다. 실제로 rdt_send(data) 이벤트는 상위 계층 애플리케이션의 프로시저 호출(예: rdt_send())에 의해 발생한다.

![[SCR-20250812-lhxz.jpeg]]

수신측에서 rdt는 rdt_rcv(packet) 이벤트에 의해 하위 채널로부터 패킷을 수신하고, 패킷으로 부터 (extract(packet, data)의해) 데이터를 추출하고 데이터를 상위 계층으로 전달한다.(deliver_data(data)). rdt_rcv(packet) 이벤트는 하위 계층 프로토콜로 부터 프로시저 호출(예: rdt_rcv())에 의해 발생한다.

이런 간단한 프로토콜에서는 데이터 단위와 패킷의 차이점이 없다. 또한 모든 패킷 흐름은 송신자로부터 수신자 까지다. 즉, 완전히 신뢰적인 채널에서는 오류가 생길 수 없으므로 수신 측이 송신 측에게 어떤 피드백을 제공할 필요도 없다. 또한 수신자는 송신자가 데이터를 송신하자마자 데이터를 수신할 수 있다 가정했음을 유념. 따라서 수신자가 송신자에게 천천히 보내라는 것을 요청할 필요가 없다.

---

> 이 파트 무슨내용이냐?

네, 이 내용을 아주 쉽게 풀어서 설명해 드릴게요. 컴퓨터 용어에 익숙하지 않아도 이해할 수 있도록 비유를 들어보겠습니다.



**한 줄 요약**

**"rdt 1.0"은 '절대 사고가 나지 않는 완벽한 택배 시스템'을 이용할 때, 우리가 어떻게 물건을 보내고 받는지에 대한 가장 기본적인 설명서입니다.**

자세한 설명 (택배 비유)

컴퓨터가 데이터를 주고받는 걸, 우리가 **택배를 보내고 받는 과정**이라고 생각해 볼게요.

**1. 핵심 가정: 완벽한 택배 시스템**

책에서 말하는 **"완벽하게 신뢰적인 채널"**은 이런 뜻입니다.

- 내가 보낸 택배는 **절대 분실되지 않아요.**
    
- 택배 상자가 **절대 찌그러지거나 내용물이 망가지지 않아요.**
    
- 내가 1번, 2번, 3번 순서로 보냈다면, 받는 사람도 **반드시 1, 2, 3 순서로 받아요.**
    

현실에는 이런 택배 시스템이 없겠죠? 하지만 컴퓨터 네트워크를 공부할 때, 가장 이상적이고 단순한 상황부터 시작하는 거예요. 이게 바로 **rdt 1.0**입니다.

**2. FSM (유한상태 머신)은 뭔가요?**

어려운 단어 같지만, 사실은 그냥 **"행동 설명서"** 또는 **"상황별 매뉴얼"**이라고 생각하면 됩니다.

예를 들어 자판기 FSM을 볼까요?

- **상태 1: "돈 기다리는 중"**
    - **이벤트:** 동전을 넣는다.
    - **행동:** "돈 받은 상태"로 바뀐다.
- **상태 2: "돈 받은 상태"**
    - **이벤트:** 음료수 버튼을 누른다.
    - **행동:** 음료수를 내보내고, "돈 기다리는 중" 상태로 돌아간다.

이처럼 **'어떤 상태'에서 '무슨 일'이 생기면 '어떤 행동'을 한다**고 정의해 놓은 그림이 바로 FSM입니다.

**3. rdt 1.0의 행동 설명서 (FSM)**

책에 나온 그림은 이 완벽한 택배 시스템을 이용하는 **보내는 사람(송신자)**과 **받는 사람(수신자)**의 행동 설명서입니다.

(a) 보내는 사람 (송신자)의 행동 설명서

- **상태:** 보내는 사람은 걱정이 없어요. 택배 시스템이 완벽하니까요. 그래서 상태가 딱 하나뿐입니다: **"보낼 준비 완료 상태"**
- **설명서 내용:**
    1. **(이벤트)** 윗사람(예: 쇼핑몰 사장님)이 "이 물건(data) 좀 보내줘!"라고 요청합니다. (rdt_send(data))
    2. **(행동)**
        - 물건을 택배 상자(packet)에 예쁘게 포장합니다. (make_pkt(data))
        - 그 상자를 완벽한 택배 시스템에 맡깁니다. (udt_send(packet))
    3. 끝! 이제 보내는 사람은 다음 물건을 보낼 준비를 합니다. (다시 "보낼 준비 완료 상태"로 돌아감)
(b) 받는 사람 (수신자)의 행동 설명서
- **상태:** 받는 사람도 걱정이 없어요. 택배가 순서대로, 안전하게 오니까요. 그래서 상태가 딱 하나뿐입니다: **"받을 준비 완료 상태"**
- **설명서 내용:**
    1. **(이벤트)** 완벽한 택배 시스템에서 "택배(packet) 왔어요!" 하고 알려줍니다. (rdt_rcv(packet))
    2. **(행동)**
        - 택배 상자를 열어서 물건(data)을 꺼냅니다. (extract(packet, data))
        - 꺼낸 물건을 기다리던 윗사람(예: 물건 주문한 고객)에게 전달합니다. (deliver_data(data))
    3. 끝! 이제 받는 사람은 다음 택배를 받을 준비를 합니다. (다시 "받을 준비 완료 상태"로 돌아감)

 왜 이렇게 간단할까요?

- **피드백(답장)이 필요 없어요:** 택배가 100% 도착하니까 받는 사람이 "잘 받았어!"라고 굳이 연락할 필요가 없죠.
- **오류 검사가 필요 없어요:** 내용물이 절대 망가지지 않으니, "이거 혹시 깨진 거 아니야?" 하고 확인할 필요가 없어요.
- **속도 조절이 필요 없어요:** 보내는 사람이 아무리 빨리 보내도 받는 사람은 착착 잘 받는다고 가정하기 때문에, "좀 천천히 보내!"라고 요청할 필요가 없어요.
- 
**결론적으로 rdt 1.0은 데이터 전송의 가장 이상적인 '유토피아' 모델입니다.** 실제 인터넷은 훨씬 복잡해서 택배가 분실되거나(패킷 손실), 순서가 뒤바뀌는 등 온갖 문제가 생기죠. 앞으로 배우게 될 rdt 2.0, 3.0 등은 이런 현실적인 문제들을 해결하기 위해 점점 더 복잡한 '행동 설명서(FSM)'를 갖게 될 겁니다.

---

### 비트 오류가 있는 채널상에서의 신뢰적 데이터 전송: rdt 2.0
![[SCR-20250812-lkui.jpeg]]