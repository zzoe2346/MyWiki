---
tags: 
created: 2025-09-09
---
## 1. 단축 URL 중복 확인을 DB에 의존적인 URL 단축
- 장점: 디비 기능 써서 간편하다
- 단점: 디비에 부하가 심하게 간다. 디비에 집중적이라 SPOF 발생이 크다. 
- 성능테스트를 해봐서 어떤 문제가 생기고 어떻게 해결할지 고민해본다.
- UNIQUE 동작방식을 이해해본다.
## 2. DB 의존을 벗어나서 애플리케이션단에서 단축 중복을 거른다.
- DB 의 부담을 애플리케이션서버에도 분산한다
- 단점: 

클릭수를 집계하고싶다.

DB에 기록하니 또 DB에 부담이 너무 심하다. 애플리케이션에 둬보니 OOM이 발생한다.
카프카를 두기보다 웹애플리케이션에서 해결해보려하자. 

메시지 큐 구현한다. 내부 메시지 큐... 

중요한건 동기적으로 두고 나머진 던지는식으로

핵심은 다 동기적으로둬보자.
