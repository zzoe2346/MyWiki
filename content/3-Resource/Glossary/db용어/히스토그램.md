---
created: 2025-05-08
tags:
  - cs/db/term
---
- 테이블의 열값이 어떻게 분포되어 있는지 확인하는 통계정보
- 옵티마이저가 실행 계획 최적화 하고자 참고하는 자료
- 만약 특정 열값들의 통계정보가 히스토그램으로 수집되잊 않았다면,
	- 중복이 제거된 열갑의 개수 `COUNT (DISTINCT 열명))`으로 대략적 열값의 분포 예측하고 실행 계획을 수립
- MySQL에서는 내부적으로 열 분포를 저장할때는 높이균형 히스토그램 방식
	- 저장된 데이터가 수만개 이상이니 이 데이터 그룹화하고, 정해진 버킷만큼 분리해서 열의 통계정보를 저장
## 예
Col2 열 대상으로 히스토그램이 어떤 방식으로 저장되는지 보여주는 예시. A ~ ZZZ까지 총 78데이터와 10개의 버킷 있다. 데이터를 버킷에 유사한 건수만큼 나누어 정렬.
![[SCR-20250509-hpux.jpeg]]
그런데 실제 디비에서 관리하는 히스토그램의 버킷은 최대값을 보관.
![[SCR-20250509-hqnj.png]]
1. WHERE에 Col2 = 'A' 면 버킷 1에만 접근해서 데이터 분포 파악
2. Col2 BETWEEN E AND O 면 버킷 2~ 6까지 접근해야됨. 전체 50% 이상 스캔해야되서 인덱스 스캔보다 테이블 풀 스캔으로 쿼리가 수행되도록 통계정보를 제공

https://www.youtube.com/watch?v=juGolQrcreY